<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Pontos Turísticos</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  <header class="header">
    <h1 class="logo">MOVBR</h1>
    <a href="/" class="btn-detalhe">Voltar</a>
  </header>

  <main style="padding: 2rem">
    <h2 style="margin-bottom: 1rem">Pontos Turísticos</h2>

    <div class="map-container">
      <div id="map"></div>
    </div>

    <section class="card-list">
      {% for ponto in pontos %}
      <div class="card">
        <div class="card-info">
          <h3>{{ ponto.nome }}</h3>
          <p>{{ ponto.descricao }}</p>
        </div>
      </div>
      {% endfor %}
    </section>
  </main>

  <script>
    const pontos = {{ pontos | tojson }};
    const map = L.map('map').setView([-15.78, -47.93], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    pontos.forEach(p => {
      if (p.localizacao?.coordinates) {
        const [lng, lat] = p.localizacao.coordinates;
        L.marker([lat, lng])
          .addTo(map)
          .bindPopup(`<strong>${p.nome}</strong><br>${p.descricao || ''}`);
      }
    });
  </script>
</body>
</html>
